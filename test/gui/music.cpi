#import "gui/gui";
#import "gui/playarea";
#import "gui/trackContainer";

#context state: struct {
    playArea: playarea.PlayAreaFormData,
    beatsPerMeasure: i16 = 4
}

fn init() {
    basic.initContext();

    gui.init();

    -- add a track
    tr: trackContainer.TrackContainerFormData;
    &context.state.playArea.tracks|:append(tr);

    while !context.quit {
        gui.tick();

        playarea.processMessages();
        playarea.draw(gui.windowRect());

        gui.commit();
    }

    return 0;
}
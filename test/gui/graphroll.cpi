#import "gui/gui";
#import "io";
#import "buffer": buf;
#import "sdl";
#import "math";

type GraphRollFormData struct {
    rect: gui.Rect!(f64),
    notes: buf.Buffer!(gui.Rect!(f64))
}

fn mouseButtonDown(messageData: *sdl.MouseButtonEvent, index: i64) {
    noteRect: gui.Rect!(f64) = {cast() messageData.x, cast() messageData.y, 10, 10};
    &context.state.playArea.graphRolls.buf[index].notes|:append(noteRect);
}

fn draw(rect: gui.Rect!(f64), index: i64) {
    -- background
    gui.drawRect(context.cairo.layer, rect, 0.6, 0.6, 0.9);

    for note: context.state.playArea.graphRolls.buf[index].notes.buf {
        gui.drawRect(context.cairo.layer, note, 0.8, 0.8, 0.2);
    }

    context.state.playArea.graphRolls.buf[index].rect = rect;
}
